{"version":3,"sources":["api.js","components/Loading.jsx","components/Modal.jsx","components/Register.jsx","hook.jsx","App.js","reportWebVitals.js","index.js"],"names":["asyncFetch","a","fetch","response","json","result","message","Error","postRegister","params","url","searchParams","URLSearchParams","Object","entries","key","value","undefined","set","toString","appendSearchParams","method","Loading","className","Modal","modalState","closeModal","children","isOtherMsg","includes","type","onClick","Register","useState","memberList","setMemberList","username","setUsername","state","setState","useModal","setNone","setLoading","setCostome","signEl","useRef","useEffect","then","length","RPGUI","create","current","onSubmit","e","element","formData","FormData","getFormData","target","catch","error","preventDefault","name","placeholder","required","ref","defaultValue","require","map","App","basename","exact","path","to","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9fdf610e.chunk.js","sourcesContent":["const TEAM_API = 'https://script.google.com/macros/s/AKfycbwXFdcsmA5c_-O30lfN5Ks3OGYboXzrH09gdnwGUCUXXiUe_TKfPKmCYo2QZIPrO4LQ/exec';\nconst ACTIVITY_API = 'https://script.google.com/macros/s/AKfycbwCyqKtYQLS01kuRsciL3E03-Tl-Y_0ZwDWHV_u_WuPiUllwSzpdyTC6lmovHyNAfla/exec';\n\n/**\n * Append search parameters after the URL.\n * @param {string} url - The URL used to append search parameters (query string).\n * @param {Object} params - The object of search parameters.\n * @example appendSearchParams('/data/posts', { author: 'nine-knives', since: '2000-01-01' })\n * // return '/data/posts?author=nine-knives&since=2000-01-01'\n * @returns {string} - The URL with search parameters.\n */\nexport const appendSearchParams = (url, params) => {\n  const searchParams = new URLSearchParams();\n  for (const [key, value] of Object.entries(params)) {\n    if (value !== undefined) searchParams.set(key, value);\n  }\n  return `${url}?${searchParams.toString()}`;\n}\n\nexport const asyncFetch = async (...args) => {\n  const response = await fetch(...args);\n  const json = await response.json();\n  if (json?.response?.result === 'fail') {\n    const { response: { message } } = json;\n    throw new Error(message);\n  }\n  return json;\n}\n\nexport const goTo = (url) => { window.location.href = url; }\n\nexport const getMemberList = () => asyncFetch(`${TEAM_API}?request=memberList`);\n\nexport const postRegister = (params) => {\n  let url = ACTIVITY_API;\n  if (params) url = appendSearchParams(url, params);\n  return asyncFetch(url, { method: 'POST' });\n}\n","import './Loading.css';\n\nfunction Loading() {\n  return <div className=\"lds-dual-ring\" />;\n}\n\nexport default Loading;\n","import Loading from './Loading';\nimport './Modal.css';\n\nfunction Modal({ modalState, closeModal, children }) {\n  if (modalState === 'none') return null;\n  const isOtherMsg = !['none', 'loading', 'custome'].includes(modalState);\n\n  return (\n    <div className=\"rpgui-content fullScreen\">\n      <div className=\"shadow\" />\n      <div className={`rpgui-container framed modal ${modalState !== 'custome' ? 'alignCenter' : ''}`}>\n        {modalState === 'loading' && <Loading />}\n        {modalState === 'custome' && children}\n        {isOtherMsg && (\n          <>\n            <p>{modalState}</p>\n            <button className=\"rpgui-button autoHeight\" type=\"button\" onClick={closeModal}>\n              <p>確定</p>\n            </button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Modal;\n","import { useEffect, useState, useRef } from 'react';\nimport { getMemberList, postRegister } from '../api'\nimport { useModal } from '../hook';\nimport Modal from './Modal';\nimport './Register.css';\n\nfunction Register() {\n  const [ memberList, setMemberList ] = useState([]);\n  const [ username, setUsername ] = useState('');\n  const [ modalState, setNone, setLoading, setCostome ] = useModal();\n  const signEl = useRef(null);\n\n  const getFormData = (element) => {\n    const formData = new FormData(element);\n    const params = {};\n    for (const [key, value] of formData.entries()) {\n      params[key] = value;\n    }\n    return params;\n  }\n\n  const registerActivity = (e) => {\n    setLoading();\n    const params = getFormData(e.target);\n    postRegister(params).then(({ result, message }) => {\n      setUsername(params.username);\n      setCostome(result === 'success' ? undefined : message);\n    }).catch((error) => {\n      setCostome(error?.message);\n    });\n    e.preventDefault();\n  }\n\n  useEffect(() => {\n    getMemberList().then((memberList) => { setMemberList(memberList); });\n  }, []);\n\n  useEffect(() => {\n    if (memberList.length > 0 && signEl) RPGUI.create(signEl.current, 'dropdown');\n  }, [memberList.length]);\n\n  return (\n    <div className=\"container\">\n      <button className=\"rpgui-button autoHeight boardMargin\" type=\"button\">\n        <p>No Game No Life</p>\n      </button>\n      <div className=\"scroll\">\n        <div className=\"scrollHead\" />\n        <div className=\"scrollMid\">\n          <form onSubmit={registerActivity}>\n            <div className=\"noRpgFont\">\n              <h1>冒險契約</h1>\n              <p>為維護 Habitica 之和平，我願加入騎士團野外訓練隊。</p>\n              <p>預計訓練內容為</p>\n              <textarea name=\"exercise\" placeholder=\"每周一、三 20:30pm 使用健身環運動 30 分鐘\" required />\n              <p>為達訓練目標，我預先準備的行動是</p>\n              <textarea name=\"prepare\" placeholder=\"先在旁備好運動褲、將健身環放在顯眼的地方\" required />\n              <p>若紀律散漫或因不可抗力因素，無法達成訓練任務時，我將以</p>\n              <textarea name=\"remedy\" placeholder=\"睡前伸展操 10 分鐘 (10 個仰臥起坐)\" required />\n              <p>進行補救，務必協助騎士團達成任務。</p>\n              <label><strong>署名</strong></label>\n            </div>\n            <select name=\"username\" ref={signEl} defaultValue=\"\" require>\n              {memberList.map(({ username }) => <option key={username} value={username}>{username}</option>)}\n            </select>\n            <hr />\n            <div className=\"centerBlock noRpgFont\">\n              <button className=\"rpgui-button autoHeight\" type=\"submit\">\n                <strong>加入騎士團</strong>\n              </button>\n            </div>\n          </form>\n        </div>\n        <div className=\"scrollFoot\" />\n      </div>\n      <Modal modalState={modalState} closeModal={setNone}>\n        <p>\n          <div>\n            <span>{username}</span>\n            <span> 的加入，必定會成為一大助力！</span>\n          </div>\n          <div>期待你的表現。</div>\n        </p>\n        <p>\n          <div>別忘了每天訓練後要進行進度回報，</div>\n          <div>晚點會再發布回報的細節。</div>\n        </p>\n        <button className=\"rpgui-button autoHeight\" type=\"button\" onClick={setNone}>\n          <p>確定</p>\n        </button>\n      </Modal>\n    </div>\n  );\n}\n\nexport default Register;","import { useState } from 'react';\n\nexport const useModal = () => {\n  // state is one of none, loading, custome\n  const [ state, setState ] = useState('none');\n  const setNone = () => { setState('none'); };\n  const setLoading = () => { setState('loading'); };\n  const setCostome = (message) => { setState( message || 'custome'); };\n\n  return [ state, setNone, setLoading, setCostome ];\n};","import {\r\n  HashRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\";\r\n// import Diary from './components/Diary';\r\n// import ErrorBoundary from './components/ErrorBoundary';\r\n// import Record from './components/Record';\r\nimport Register from './components/Register';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  return (\r\n    <>\r\n      <div className=\"oldMapBg\" />\r\n      <div className=\"rpgui-content\">\r\n        <Router basename=\"/\">\r\n          <Switch>\r\n            <Route exact path=\"/\">\r\n              <Link className=\"rpgui-button autoHeight\" to=\"/register\">\r\n                <p>報名</p>\r\n              </Link>\r\n            </Route>\r\n            <Route path=\"/register\"><Register /></Route>\r\n            {/* <Route path=\"/record\"><Record /></Route>\r\n            <Route path=\"/diary\"><Diary /></Route> */}\r\n          </Switch>\r\n        </Router>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}